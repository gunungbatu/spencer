<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery | Spencer Green Hotel Batu</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script src="assets/js/global-config.js"></script>

    <style>
        :root { --gold: #D4AF37; --emerald: #1B4D3E; --dark: #111; --light: #F9F9F9; }
        body { font-family: 'Montserrat', sans-serif; color: #fff; background: var(--dark); margin:0; overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Cormorant Garamond', serif; color: #fff; }

        /* --- HERO --- */
        .hero-gallery { height:40vh; background:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('assets/gallery-bg.jpg'); background-size:cover; background-position:center; display:flex; align-items:center; justify-content:center; text-align:center; }
        .hero-title { color:#fff; font-size:3.5rem; margin:0; letter-spacing:3px; } 
        .hero-subtitle { color:var(--gold); letter-spacing:3px; font-weight:600; text-transform: uppercase; font-size: 0.9rem; }

        /* --- 3D CAROUSEL CORE (TikTok Effect) --- */
        .gallery-viewport {
            height: 600px;
            width: 100%;
            display: flex;
            perspective: 1500px; /* Kedalaman 3D */
            perspective-origin: 50% 40%;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, #222 0%, #111 100%);
            overflow: hidden;
            position: relative;
        }

        #gallery-container {
            position: relative;
            width: 200px;
            height: 300px;
            transform-style: preserve-3d;
            animation: rotateCarousel 30s infinite linear; /* Berputar Otomatis */
            transition: 0.5s;
        }

        .gallery-viewport:hover #gallery-container {
            animation-play-state: paused; /* Berhenti saat dihover */
        }

        .gallery-item {
            position: absolute;
            width: 250px;
            height: 350px;
            left: 50%;
            top: 50%;
            margin-left: -125px;
            margin-top: -175px;
            border: 1px solid rgba(212, 175, 55, 0.4);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            backface-visibility: hidden;
            transition: 0.5s;
            cursor: pointer;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.5s;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        @keyframes rotateCarousel {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }

        /* --- FOOTER --- */
        footer { background:var(--emerald); color:#fff; padding:50px; text-align:center; }
        
        @media(max-width:768px) { 
            .hero-title { font-size: 2.5rem; }
            .gallery-viewport { height: 450px; }
            .gallery-item { width: 180px; height: 260px; margin-left: -90px; margin-top: -130px; }
        }
    </style>
</head>
<body data-page="gallery">

    <div id="global-header-container"></div>

    <section class="hero-gallery" id="img_gallery_hero">
        <div>
            <p class="hero-subtitle" id="gallery_subtitle">Visual Journey</p>
            <h1 class="hero-title" id="gallery_title">3D Gallery Experience</h1>
        </div>
    </section>

    <div class="gallery-viewport">
        <div id="gallery-container">
            </div>
    </div>

    <footer id="global-footer"></footer>

    <script>
        fetch('data.json?t=' + new Date().getTime())
        .then(r => r.json())
        .then(data => {
            // 1. Update Hero & Header (Sesuai Master)
            const gTitle = document.getElementById('gallery_title');
            const gSub = document.getElementById('gallery_subtitle');
            if(gTitle) gTitle.innerText = data.gallery_title || "3D Gallery Experience";
            if(gSub) gSub.innerText = data.gallery_subtitle || "Visual Journey";
            
            if(data.img_gallery_hero) {
                document.querySelector('.hero-gallery').style.backgroundImage = `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('${data.img_gallery_hero}')`;
            }

            // 2. Inject Dynamic Images ke 3D Container
            const container = document.getElementById('gallery-container');
            const items = [];

            // Kumpulkan semua image yang ada di JSON (Maksimal 12 sesuai dashboard)
            for (let i = 1; i <= 12; i++) {
                if(data[`img_gallery_${i}`]) {
                    items.push(data[`img_gallery_${i}`]);
                }
            }

            // Jika tidak ada data dinamis, fallback ke gambar statis
            const finalImages = items.length > 0 ? items : [
                "assets/room1.jpg", "assets/room2.jpg", "assets/room3.avif",
                "assets/rooftop.jpg", "assets/dining-bg.jpg", "assets/meeting-bg.jpg",
                "assets/meeting-room.jpg", "assets/wedding-2.jpg", "assets/wedding-3.jpg"
            ];

            const total = finalImages.length;
            const radius = 400; // Radius lingkaran 3D
            const angleStep = 360 / total;

            finalImages.forEach((src, idx) => {
                const div = document.createElement('div');
                div.className = 'gallery-item';
                
                // Kalkulasi posisi 3D tiap item
                const currentAngle = idx * angleStep;
                div.style.transform = `rotateY(${currentAngle}deg) translateZ(${radius}px)`;
                
                div.innerHTML = `<img src="${src}" alt="Gallery Item">`;
                container.appendChild(div);
            });
        });

        window.addEventListener('scroll', ()=> {
            const nav = document.getElementById('navbar');
            if(nav) nav.classList.toggle('scrolled', window.scrollY > 50);
        });
    </script>
</body>
</html>
